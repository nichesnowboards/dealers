(this.webpackJsonpdealers=this.webpackJsonpdealers||[]).push([[0],{38:function(e,t,a){},39:function(e,t,a){},57:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),c=a(33),i=a(2),r=a(32),o=a.n(r),l=(a(38),a(39),a(4)),u=a(5),d=a(7),h=a(6),j=a(11),b=a.n(j),m=a.p+"static/media/logo.9e90c648.png",p=(a(57),a(12)),O=a(19),v=a(14),f=a(0);function g(e){var t=e.showMenu,a=e.toggleMenu;return t?Object(f.jsx)("div",{className:"menu-overlay",onClick:a}):""}function x(e){var t=e.menu;return t&&t.length?Object(f.jsx)("div",{className:"sub-menu",children:t.map((function(e){var t=e.title,a=e.url,n=e.id;return Object(f.jsx)("div",{children:Object(f.jsx)("a",{href:a,children:t})},n)}))}):""}function w(e){var t=e.showMenu,a=e.menu;return t?Object(f.jsx)("nav",{children:a.map((function(e){var t=e.title,a=e.url,n=e.id,s=e.children;return Object(f.jsxs)("div",{children:[Object(f.jsx)("a",{href:a,children:t}),Object(f.jsx)(x,{menu:s})]},n)}))}):""}var y=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={name:"",description:"",isLoaded:!1,showMenu:!1,menu:null},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this,t="https://nichesnowboards.com/wp-json";b.a.get("".concat(t,"/nichesnowboards/v1/menu/")).then((function(t){e.setState({menu:t.data.reduce(e.buildMenu,[])})})).catch((function(e){return console.log(e)})),b.a.get("".concat(t,"/")).then((function(t){return e.setState({name:t.data.name,description:t.data.description,isLoaded:!0})})).catch((function(e){return console.log(e)})),this.toggleMenu=this.toggleMenu.bind(this)}},{key:"buildMenu",value:function(e,t){if("0"===t.menu_item_parent)e.push({id:t.ID,title:t.title,url:t.url,children:[]});else{var a=e.find((function(e){return e.id===Number(t.menu_item_parent)}));a&&a.children.push({id:t.ID,title:t.title,url:t.url})}return e}},{key:"toggleMenu",value:function(){console.log(this.state.showMenu),this.setState({showMenu:!this.state.showMenu})}},{key:"render",value:function(){return Object(f.jsxs)("header",{children:[Object(f.jsxs)("div",{className:"topbar",children:[Object(f.jsx)("span",{children:this.state.description}),Object(f.jsxs)("div",{className:"social",children:[Object(f.jsx)("a",{className:"icon",href:"https://www.facebook.com/nichesnowboards",target:"_blank",rel:"noreferrer",children:Object(f.jsx)(p.a,{icon:O.a})}),Object(f.jsx)("a",{className:"icon",href:"https://www.instagram.com/nichesnowboards/",target:"_blank",rel:"noreferrer",children:Object(f.jsx)(p.a,{icon:O.b})}),Object(f.jsx)("a",{className:"icon",href:"https://vimeo.com/nichesnowboards",target:"_blank",rel:"noreferrer",children:Object(f.jsx)(p.a,{icon:O.c})})]})]}),Object(f.jsxs)("div",{className:"menubar",children:[Object(f.jsx)("button",{className:"menu-toggle",onClick:this.toggleMenu,children:Object(f.jsx)(p.a,{icon:v.a})}),Object(f.jsx)("div",{className:"logo",children:Object(f.jsx)("a",{href:"https://nichesnowboards.com/",children:Object(f.jsx)("img",{src:m,alt:"Logo"})})})]}),Object(f.jsx)(w,{showMenu:this.state.showMenu,menu:this.state.menu}),Object(f.jsx)(g,{showMenu:this.state.showMenu,toggleMenu:this.toggleMenu})]})}}]),a}(n.Component),k=y,M=(a(63),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(f.jsxs)("footer",{children:[Object(f.jsxs)("div",{className:"links",children:[Object(f.jsx)("a",{href:"https://nichesnowboards.com/warranty-returns/",children:"Warranty & Returns"}),Object(f.jsx)("a",{href:"https://nichesnowboards.com/privacy-policy/",children:"Privacy Policy"})]}),Object(f.jsx)("div",{className:"copyright",children:Object(f.jsxs)("p",{children:["\xa9 Niche Snowboards ",(new Date).getFullYear()]})})]})}}]),a}(n.Component)),N=M,L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],S=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={imgUrl:"",author:"",created:{}},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.post,a=t.featured_media,n=t.author,s=t.date,c=b.a.get("https://nichesnowboards.com/wp-json/wp/v2/media/".concat(a)),i=b.a.get("https://nichesnowboards.com/wp-json/wp/v2/users/".concat(n)),r=new Date(s);Promise.all([c,i]).then((function(t){console.log(r),e.setState({imgUrl:t[0].data.media_details.sizes.full.source_url,author:t[1].data.name,isLoaded:!0,created:{day:r.getDate(),month:L[r.getMonth()]}})}))}},{key:"render",value:function(){var e=this.props.post,t=e.title,a=e.excerpt,n=this.state,s=n.author,c=n.imgUrl,i=n.created;return Object(f.jsxs)("div",{className:"post",children:[Object(f.jsxs)("div",{className:"created",children:[Object(f.jsx)("span",{className:"day",children:i.day}),Object(f.jsx)("span",{className:"month",children:i.month})]}),Object(f.jsx)("img",{src:c,alt:t.rendered}),Object(f.jsxs)("div",{className:"content",children:[Object(f.jsx)("h2",{dangerouslySetInnerHTML:{__html:t.rendered}}),Object(f.jsx)("div",{className:"meta",children:Object(f.jsxs)("p",{children:["by ",s]})}),Object(f.jsx)("div",{dangerouslySetInnerHTML:{__html:a.rendered}})]})]})}}]),a}(n.Component),D=S,R=(a(64),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={posts:[]},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.get("".concat("https://nichesnowboards.com/wp-json","/wp/v2/posts/")).then((function(t){return e.setState({posts:t.data,isLoaded:!0})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.state.posts;return Object(f.jsx)("div",{className:"posts",children:e.map((function(e){return Object(f.jsx)(D,{post:e},e.id)}))})}}]),a}(n.Component)),C=R,F=a(22),_=a(8),I=(a(65),[50,100,200,500]),U=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={showRadiusOpt:!1,userRadius:e.userRadius},n.showOptions=n.showOptions.bind(Object(_.a)(n)),n.selectOption=n.selectOption.bind(Object(_.a)(n)),n.updateRadius=e.updateRadius,n}return Object(u.a)(a,[{key:"showOptions",value:function(){this.setState({showRadiusOpt:!this.state.showRadiusOpt})}},{key:"selectOption",value:function(e){this.updateRadius(e),this.showOptions(),this.setState({userRadius:e})}},{key:"render",value:function(){var e=this;return this.state.showRadiusOpt?Object(f.jsx)("div",{className:"select-list",children:I.map((function(t,a){return Object(f.jsx)("span",{onClick:e.selectOption.bind(e,t),children:t},a)}))}):Object(f.jsx)("button",{className:"inline-link",onClick:this.showOptions,children:this.state.userRadius})}}]),a}(n.Component),A=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={userLocation:e.userLocation,userRadius:e.userRadius,showForm:!1,search:e.search},n.showSearchForm=n.showSearchForm.bind(Object(_.a)(n)),n.setValue=n.setValue.bind(Object(_.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(_.a)(n)),n.useMyLocation=n.useMyLocation.bind(Object(_.a)(n)),n.getDistance=e.onUpdate,n.updateRadius=e.updateRadius,n}return Object(u.a)(a,[{key:"showSearchForm",value:function(){this.setState({showForm:!this.state.showForm})}},{key:"showRadiusOpt",value:function(){}},{key:"setValue",value:function(e){this.setState({search:e.target.value})}},{key:"handleSubmit",value:function(e){this.showSearchForm(),this.getDistance(e)}},{key:"useMyLocation",value:function(){this.getDistance(this.state.userLocation),this.setState({search:""}),this.showSearchForm()}},{key:"render",value:function(){var e=this.state,t=e.userLocation,a=e.userRadius,n=e.showForm,s=e.search;if(t&&!n){var c="my location";return s&&(c=s),Object(f.jsxs)("div",{className:"search-results",children:[Object(f.jsxs)("div",{className:"content",children:["Showing results within",Object(f.jsx)(U,{userRadius:a,updateRadius:this.updateRadius}),"mi of ",c]}),Object(f.jsx)("button",{onClick:this.showSearchForm,className:"link",children:"Change Location"})]})}return Object(f.jsxs)("div",{className:"search",children:[Object(f.jsxs)("form",{className:"input-group",onSubmit:this.handleSubmit,children:[Object(f.jsx)("input",{placeholder:"Enter City, State or Zipcode",name:"search",value:s,onChange:this.setValue}),Object(f.jsx)("button",{type:"submit",className:"button",children:"Search"})]}),Object(f.jsx)("button",{onClick:this.useMyLocation,className:"link",children:"Use My Location"})]})}}]),a}(n.Component),P=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).map=e.map,n.state={location:e.location||{lat:-34.397,lng:150.644}},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.map=new this.map(document.getElementById("map"),{center:this.state.location,zoom:8})}},{key:"componentDidUpdate",value:function(){this.map.setCenter(this.state.location)}},{key:"render",value:function(){return Object(f.jsx)("div",{id:"map"})}}]),a}(n.Component);function J(e){var t=e.dealer;return t.phone?Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{className:"icon",children:Object(f.jsx)(p.a,{icon:v.c})})," ",Object(f.jsx)("a",{href:"tel:"+t.phone,className:"inline-link",children:t.phone})]}):""}function V(e){var t=e.dealer;return t.website?Object(f.jsx)("div",{className:"actions",children:Object(f.jsx)("a",{href:t.website,target:"_blank",rel:"noreferrer",className:"button",children:"Website"})}):""}function E(e){var t=e.dealer;return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:t.title}),Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{className:"icon",children:Object(f.jsx)(p.a,{icon:v.b})})," ",t.street,", ",t.city,", ",t.state," ",t.postal_code]}),Object(f.jsx)(J,{dealer:t}),Object(f.jsx)(V,{dealer:t})]})}var T=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={dealers:[],filteredDealers:[],isLoaded:!1,search:"",location:null,userLocation:null,userRadius:50},n.searchDealers=n.searchDealers.bind(Object(_.a)(n)),n.initMap=n.initMap.bind(Object(_.a)(n)),n.filterDealers=n.filterDealers.bind(Object(_.a)(n)),n.dealerLocations=n.dealerLocations.bind(Object(_.a)(n)),n.updateRadius=n.updateRadius.bind(Object(_.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.getUserLocation(),b.a.get("".concat("https://nichesnowboards.com/wp-json","/nichesnowboards/v1/dealers/")).then((function(t){e.setState({dealers:t.data})})).catch((function(e){return console.log(e)})),window.initMap=this.initMap,function(e){var t=document.createElement("script");t.src=e,t.async=!0,document.body.appendChild(t)}("https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyAItV-8HqS4WWMYd1txR8ppL06U_U2oZRU","&callback=initMap&v=weekly"))}},{key:"initMap",value:function(){this.geocoder=window.google.maps.Geocoder,this.map=window.google.maps.Map}},{key:"geocoder",value:function(){}},{key:"map",value:function(){}},{key:"searchDealers",value:function(e){var t=this;if(e&&e.target){var a=new FormData(e.target);(new this.geocoder).geocode({address:a.get("search")},(function(e){var a=e.map((function(e){var t=e.formatted_address,a=e.geometry;return{search:t,location:{lat:a.location.lat(),lng:a.location.lng()}}}));t.setState(a[0],t.filterDealers)})),e.preventDefault()}else this.setState({search:""})}},{key:"updateRadius",value:function(e){this.setState({userRadius:e},this.filterDealers)}},{key:"getUserLocation",value:function(){var e=this;"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(t){e.setState({userLocation:{lat:t.coords.latitude,lng:t.coords.longitude},isLoaded:!0},e.filterDealers)}),(function(t){console.log(t),e.setState({isLoaded:!0})})):this.setState({isLoaded:!0})}},{key:"filterDealers",value:function(e){var t=this.state,a=t.dealers,n=t.userRadius;a.length&&this.setState({filteredDealers:a.map(this.dealerLocations).sort(this.dealerDistance).filter((function(e){return e.distance<1.6*n})),isLoaded:!0})}},{key:"dealerLocations",value:function(e){var t=this.state,a=t.userLocation,n=t.location;return n||(n=a),Object(F.a)(Object(F.a)({},e),{},{distance:this.getDistanceFromLatLonInKm(Number(e.lat),Number(e.lng),n.lat,n.lng)})}},{key:"dealerDistance",value:function(e,t){return Number(e.distance)<Number(t.distance)?-1:Number(e.distance)>Number(t.distance)?1:0}},{key:"getDistanceFromLatLonInKm",value:function(e,t,a,n){var s=this.deg2rad(a-e),c=this.deg2rad(n-t),i=Math.sin(s/2)*Math.sin(s/2)+Math.cos(this.deg2rad(e))*Math.cos(this.deg2rad(a))*Math.sin(c/2)*Math.sin(c/2);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))}},{key:"deg2rad",value:function(e){return e*(Math.PI/180)}},{key:"render",value:function(){var e=this.state,t=e.search,a=e.userLocation,n=e.location,s=e.userRadius,c=e.filteredDealers;return e.isLoaded?Object(f.jsxs)("div",{className:"dealers",children:[Object(f.jsx)(P,{map:this.map,location:n||a}),Object(f.jsxs)("div",{className:"list",children:[Object(f.jsx)("h1",{children:"Find A Dealer"}),Object(f.jsx)(A,{search:t,userLocation:a,userRadius:s,onUpdate:this.searchDealers,updateRadius:this.updateRadius}),c.map((function(e){return Object(f.jsx)("div",{className:"dealer",children:Object(f.jsx)(E,{dealer:e})},e.id)}))]})]}):Object(f.jsx)("div",{className:"loading",children:"Loading..."})}}]),a}(n.Component),W=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,67)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),s(e),c(e),i(e)}))};o.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsxs)(c.a,{children:[Object(f.jsx)(k,{}),Object(f.jsx)("div",{className:"app",children:Object(f.jsxs)(i.c,{children:[Object(f.jsx)(i.a,{path:"/posts",element:Object(f.jsx)(C,{})}),Object(f.jsx)(i.a,{path:"/dealers",element:Object(f.jsx)(T,{})}),Object(f.jsx)(i.a,{path:"/",element:Object(f.jsx)(C,{})})]})}),Object(f.jsx)(N,{})]})}),document.getElementById("root")),W()}},[[66,1,2]]]);
//# sourceMappingURL=main.4e28efa6.chunk.js.map